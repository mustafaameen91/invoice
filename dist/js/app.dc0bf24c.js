(function(e){function t(t){for(var l,a,r=t[0],s=t[1],c=t[2],d=0,v=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&v.push(o[a][0]),o[a]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);u&&u(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],l=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(l=!1)}l&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var l={},o={app:0},i=[];function a(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"4bf84d4f"}[e]+".js"}function r(t){if(l[t])return l[t].exports;var n=l[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var l=new Promise((function(t,l){n=o[e]=[t,l]}));t.push(n[2]=l);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=a(e);var c=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var l=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+l+": "+i+")",c.name="ChunkLoadError",c.type=l,c.request=i,n[1](c)}o[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=l,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(n,l,function(t){return e[t]}.bind(null,l));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3d23":function(e,t,n){"use strict";var l=n("ecbc"),o=n.n(l);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var l=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticStyle:{background:"#515a6e"},attrs:{id:"nav"}},[e.login?n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("div",{staticStyle:{display:"inline-block"}},[n("Button",{staticStyle:{color:"#515a6e"},attrs:{icon:"ios-exit"},on:{click:e.logout}},[e._v("تسجيل خروج")])],1)]),n("Col",{attrs:{span:"18"}},[n("div",{staticStyle:{"margin-right":"50px"}},[e.showBill?n("MenuItem",{attrs:{name:"1",to:"/"}},[n("Icon",{attrs:{type:"ios-paper"}}),e._v(" الفواتير ")],1):e._e(),e.showDriverBill?n("MenuItem",{attrs:{name:"4",to:"/invoice"}},[n("Icon",{attrs:{type:"ios-list-box"}}),e._v(" فواتير التسليم ")],1):e._e(),n("MenuItem",{attrs:{name:"2",to:"/stores"}},[n("Icon",{attrs:{type:"ios-cart"}}),e._v(" المحلات / الصفحات ")],1),n("MenuItem",{attrs:{name:"3",to:"/drivers"}},[n("Icon",{attrs:{type:"ios-people"}}),e._v(" السواق ")],1)],1)])],1)],1):e._e()],1),n("router-view")],1)},i=[],a={data:function(){return{login:!1,showDriverBill:!1,showBill:!1,user:""}},created:function(){var e=JSON.parse(localStorage.getItem("loggedIn"));e?(this.login=!0,this.user=e,1==e.roleId?(this.$router.push("/").catch((function(e){})),this.showDriverBill=!0,this.showBill=!0):2==e.roleId?(this.$router.push("/").catch((function(e){})),this.showDriverBill=!1,this.showBill=!0):(this.$router.push("/invoice").catch((function(e){})),this.showDriverBill=!0,this.showBill=!1)):this.$router.push("/login").catch((function(e){}))},methods:{logout:function(){localStorage.removeItem("loggedIn"),this.$router.go(0)}}},r=a,s=(n("5c0b"),n("2877")),c=Object(s["a"])(r,o,i,!1,null,null,null),d=c.exports,u=(n("d3b7"),n("8c4f")),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.keyComponent,staticClass:"home"},[n("Row",{staticStyle:{margin:"20px"}},[n("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"3"}},[n("Select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:"",placeholder:"رقم الفاتورة"},on:{"on-change":e.findInvoiceByNo},model:{value:e.selectedFindBill,callback:function(t){e.selectedFindBill=t},expression:"selectedFindBill"}},e._l(e.allBills,(function(t,l){return n("Option",{key:l,attrs:{value:t.billNo}},[e._v(e._s(t.billNo))])})),1)],1),n("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم المحل او الصفحة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByStoreName},model:{value:e.selectedFindStore,callback:function(t){e.selectedFindStore=t},expression:"selectedFindStore"}},e._l(e.allStores,(function(t,l){return n("Option",{key:l,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1),n("Col",{attrs:{span:"3"}},[n("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByProvinceId},model:{value:e.selectedFindProvince,callback:function(t){e.selectedFindProvince=t},expression:"selectedFindProvince"}},e._l(e.allProvince,(function(t,l){return n("Option",{key:l,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),n("Col",{attrs:{span:"3"}},[n("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"الحالة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByStatusId},model:{value:e.selectedFindStatus,callback:function(t){e.selectedFindStatus=t},expression:"selectedFindStatus"}},e._l(e.statusData,(function(t,l){return n("Option",{key:l,attrs:{value:t.statusId}},[e._v(e._s(t.statusName))])})),1)],1),n("Col",{attrs:{span:"3"}},[n("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"اسم السائق",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDriverId},model:{value:e.selectedFindDriver,callback:function(t){e.selectedFindDriver=t},expression:"selectedFindDriver"}},e._l(e.allDrivers,(function(t,l){return n("Option",{key:l,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),n("Col",{attrs:{span:"4"}},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"اختر يوم"},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDate},model:{value:e.invoiceDate,callback:function(t){e.invoiceDate=t},expression:"invoiceDate"}})],1),n("Col",{attrs:{span:"4"}},[n("Button",{attrs:{type:"success",shape:"circle",icon:"ios-add"},on:{click:function(t){e.addInvoice=!0}}},[e._v("اضافة فاتورة")])],1)],1),n("Table",{staticStyle:{direction:"rtl",margin:"10px"},attrs:{border:"",columns:e.columns12,data:e.allBills,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var l=t.row;return[n("strong",[e._v(e._s(l.name))])]}},{key:"action",fn:function(t){var l=t.row,o=t.index;return[n("Button",{attrs:{type:"info",shape:"circle",icon:"ios-information-circle",size:"small"},on:{click:function(t){return e.show(o)}}}),n("Button",{staticStyle:{background:"#515a6e",color:"#fff",margin:"0 5px"},attrs:{shape:"circle",icon:"ios-create",size:"small",disabled:1==l.pending},on:{click:function(t){return e.showEdit(l)}}}),n("Button",{attrs:{type:"success",shape:"circle",icon:"md-checkmark-circle-outline",size:"small"},on:{click:function(t){return e.changeStatus(l)}}})]}},{key:"status",fn:function(t){var l=t.row;t.index;return[n("div",{staticStyle:{display:"inline-block",margin:"1px",padding:"2px"}},[0==l.pending&&0==l.delivered?n("Icon",{attrs:{type:"ios-cube",color:"purple",size:"20"}}):e._e(),1==l.pending&&0==l.delivered&&0==l.returned?n("Icon",{attrs:{type:"ios-car",color:"Blue",size:"20"}}):e._e(),1==l.delivered&&1==l.pending?n("Icon",{attrs:{type:"ios-checkmark-circle",color:"green",size:"20"}}):e._e(),0==l.delivered&&1==l.pending&&1==l.returned?n("Icon",{attrs:{type:"ios-close-circle",color:"red",size:"20"}}):e._e()],1)]}},{key:"footer",fn:function(t){t.row,t.index;return[e._v(" sss")]}}])}),n("Modal",{attrs:{title:"اضافة فاتورة",width:"600px"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.addInvoice,callback:function(t){e.addInvoice=t},expression:"addInvoice"}},[n("Row",{staticStyle:{direction:"rtl",margin:"10px auto"}},[n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("span",[e._v(" تاريخ الفاتورة : "+e._s(e.getDate(new Date))+" ")])]),n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("span",[e._v("رقم الفاتورة : "+e._s(e.allBills.length+1))])])],1),n("Row",{staticStyle:{direction:"rtl"}},[n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("div",[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.customerPhone,callback:function(t){e.customerPhone=t},expression:"customerPhone"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},model:{value:e.selectedAddProvince,callback:function(t){e.selectedAddProvince=t},expression:"selectedAddProvince"}},e._l(e.allProvince,(function(t,l){return n("Option",{key:l,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1)]),n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("div",[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم الزبون..."},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"العنوان..."},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"السعر الكلي..."},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحل او الصفحة",filterable:"",clearable:""},model:{value:e.selectedAddStore,callback:function(t){e.selectedAddStore=t},expression:"selectedAddStore"}},e._l(e.allStores,(function(t,l){return n("Option",{key:l,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1)])],1)],1),n("Modal",{attrs:{title:"تعديل الفاتورة",width:"600px"},on:{"on-ok":e.okEdit,"on-cancel":e.cancel},model:{value:e.editInvoice,callback:function(t){e.editInvoice=t},expression:"editInvoice"}},[n("Row",{staticStyle:{direction:"rtl",margin:"10px auto"}},[n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("span",[e._v(" تاريخ الفاتورة : "+e._s(e.getDate(new Date(e.editInvoiceData.billDate)))+" ")])]),n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("span",[e._v("رقم الفاتورة : "+e._s(e.editInvoiceData.billNo))])])],1),n("Row",{staticStyle:{direction:"rtl"}},[n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("div",[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.editInvoiceData.customerPhone,callback:function(t){e.$set(e.editInvoiceData,"customerPhone",t)},expression:"editInvoiceData.customerPhone"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},model:{value:e.editInvoiceData.provinceId,callback:function(t){e.$set(e.editInvoiceData,"provinceId",t)},expression:"editInvoiceData.provinceId"}},e._l(e.allProvince,(function(t,l){return n("Option",{key:l,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1)]),n("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[n("div",[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم الزبون..."},model:{value:e.editInvoiceData.customerName,callback:function(t){e.$set(e.editInvoiceData,"customerName",t)},expression:"editInvoiceData.customerName"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"العنوان..."},model:{value:e.editInvoiceData.address,callback:function(t){e.$set(e.editInvoiceData,"address",t)},expression:"editInvoiceData.address"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"السعر الكلي..."},model:{value:e.editInvoiceData.totalPrice,callback:function(t){e.$set(e.editInvoiceData,"totalPrice",t)},expression:"editInvoiceData.totalPrice"}})],1),n("div",{staticStyle:{margin:"5px auto"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحل او الصفحة",filterable:"",clearable:""},model:{value:e.editInvoiceData.storeId,callback:function(t){e.$set(e.editInvoiceData,"storeId",t)},expression:"editInvoiceData.storeId"}},e._l(e.allStores,(function(t,l){return n("Option",{key:l,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1)])],1)],1),n("Modal",{attrs:{width:"360"},model:{value:e.deliveredStatus,callback:function(t){e.deliveredStatus=t},expression:"deliveredStatus"}},[n("p",{staticStyle:{color:"#123456","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[e._v("حالة البضاعة")])],1),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v(" هل انت متأكد من ان البضاعة قد سلمت للزبون او تم استرجاعها ؟ ")])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error",loading:e.waitToChangeStatus},on:{click:e.confirmReturn}},[e._v("تم الاسترجاع")]),n("Divider",{attrs:{type:"vertical"}}),n("Button",{attrs:{type:"success",loading:e.waitToChangeStatus},on:{click:e.confirmStatus}},[e._v("تم التسليم")])],1)])],1)},p=[],f=(n("99af"),n("4de4"),n("7db0"),n("820e"),n("3ca3"),n("ddb0"),{name:"Home",data:function(){return{columns12:[{title:"رقم الفاتورة",key:"billNo"},{title:"اسم الزبون",key:"customerName"},{title:"عنوان الزبون",key:"address"},{title:"هاتف الزبون",key:"customerPhone"},{title:"اسم الصفحة/المحل",key:"storeName"},{title:"هاتف الصفحة/المحل",key:"storePhone"},{title:"المحافظة",key:"provinceName"},{title:"السعر",key:"totalPrice"},{title:"الحالة",slot:"status",width:100,align:"center"},{title:"Action",slot:"action",width:120,align:"center"}],statusData:[{statusId:1,statusName:"في المخزن"},{statusId:2,statusName:"قيد التوصيل"},{statusId:3,statusName:"تم التسليم"},{statusId:4,statusName:"مسترجع"}],allBills:[],editInvoiceData:"",allDrivers:[],allStores:[],originalBills:[],originalDrivers:[],originalStores:[],allProvince:[],originalProvince:[],selectedAddProvince:"",deliveredStatus:!1,waitToChangeStatus:!1,editInvoice:!1,rowToChangeStatus:{},selectedFindDriver:"",selectedFindBill:"",selectedFindStatus:"",selectedFindProvince:"",selectedFindStore:"",customerName:"",totalPrice:"",customerPhone:"",address:"",invoiceDate:"",note:"",selectedStore:0,addInvoice:!1,loading:!0,value:"",selectedDriver:0,selectedAddDriver:0,selectedAddStore:0,keyComponent:0,url:this.$store.state.url}},created:function(){var e=this;e.getAllData()},methods:{getDate:function(e){var t=new Date(e);return t.getDate()+" / "+(t.getMonth()+1)+" / "+t.getFullYear()},changeStatus:function(e){var t=this;1==e.delivered&&1==e.pending?t.$Message.success("لقد تم تسليم هذه البضاعة"):0==e.pending?t.$Message.error("يجب اولا تعيين سائق للفاتورة"):1==e.returned?t.$Message.error("تم استرجاع البضاعة"):(this.deliveredStatus=!0,this.rowToChangeStatus=e)},confirmReturn:function(){var e=this;this.$http.put("".concat(e.url,"/updateReturn/").concat(e.rowToChangeStatus.idBill),{returned:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استرجاع"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},confirmStatus:function(){var e=this;this.$http.put("".concat(e.url,"/updateDelivered/").concat(e.rowToChangeStatus.idBill),{delivered:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استلام"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},show:function(e){var t=this;t.$Modal.info({title:"معلومات الفاتورة",content:"التاريخ：".concat(t.getDate(t.allBills[e].billDate),"<br>الملاحظات：").concat(t.allBills[e].note,"<br>هاتف المحل/الصفحة：").concat(t.allBills[e].storePhone)})},showEdit:function(e){var t=this;console.log(e),t.editInvoiceData=e,t.editInvoice=!0},getAllData:function(){var e=this,t="".concat(e.url,"/allProvince"),n="".concat(e.url,"/bills"),l="".concat(e.url,"/allStores"),o="".concat(e.url,"/drivers");function i(){return e.$http.get(t)}function a(){return e.$http.get(o)}function r(){return e.$http.get(n)}function s(){return e.$http.get(l)}Promise.allSettled([i(),r(),s(),a()]).then((function(t){var n=t[0],l=t[1],o=t[2],i=t[3];console.log(n),e.loading=!1,e.allProvince="fulfilled"==n.status?n.value.data:[],e.originalProvince="fulfilled"==n.status?n.value.data:[],e.allBills="fulfilled"==l.status?l.value.data:[],e.originalBills="fulfilled"==l.status?l.value.data:[],e.allStores="fulfilled"==o.status?o.value.data:[],e.originalStores="fulfilled"==o.status?o.value.data:[],e.allDrivers="fulfilled"==i.status?i.value.data:[],e.originalDrivers="fulfilled"==i.status?i.value.data:[],console.log(e.allDrivers),console.log(e.allStores),console.log(e.allBills)})).catch((function(e){console.log(e)}))},ok:function(){var e=this;if(e.selectedAddProvince&&e.selectedAddStore&&e.customerName&&e.customerPhone&&e.address&&e.totalPrice){var t={billNo:e.allBills.length+1,driverId:0,provinceId:e.selectedAddProvince,storeId:e.selectedAddStore,billInfo:[{customerName:e.customerName,customerPhone:e.customerPhone,address:e.address,totalPrice:e.totalPrice,note:e.note}]};console.log(t),this.$http.post("".concat(e.url,"/addBill"),t).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))}else e.$Message["error"]({background:!0,content:"الرجاء ادخال جميع الحقول"})},okEdit:function(){var e=this,t=e.editInvoiceData;console.log(t),this.$http.post("".concat(e.url,"/editBill/").concat(e.editInvoiceData.idBill),t).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))},cancel:function(){this.$Message.info("Clicked cancel")},findInvoiceByProvinceId:function(){var e=this,t=e.allBills.filter((function(t){return t.provinceId==e.selectedFindProvince}));e.allBills=t||e.originalBills},findInvoiceByNo:function(){var e,t=this;e=t.allBills.find((function(e){return e.billNo==t.selectedFindBill})),t.allBills=e?[e]:t.originalBills},findInvoiceByStoreName:function(){var e=this,t=e.allBills.filter((function(t){return t.storeId==e.selectedFindStore}));e.allBills=t||e.originalBills},findInvoiceByStatusId:function(){var e=this,t=[];1==e.selectedFindStatus?t=e.allBills.filter((function(e){return 0==e.pending})):2==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&0==e.returned})):3==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&1==e.delivered&&0==e.returned})):4==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&1==e.returned})):e.allBills=e.originalBills,e.allBills=t||e.originalBills},findInvoiceByDriverId:function(){var e=this,t=e.allBills.filter((function(t){return t.driverId==e.selectedFindDriver}));e.allBills=t||e.originalBills},findInvoiceByDate:function(){var e=this,t=new Date(e.invoiceDate).toLocaleDateString();console.log(t);var n=e.allBills.filter((function(e){return new Date(e.billDate).toLocaleDateString()==t}));console.log(n),n?e.allBills=n:(e.invoiceDate="",e.allBills=e.originalBills)},clearData:function(){var e=this;e.invoiceDate="",e.allBills=e.originalBills,e.keyComponent+=1}}}),h=f,g=Object(s["a"])(h,v,p,!1,null,null,null),m=g.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"10px",direction:"rtl"}},[n("Row",{staticStyle:{margin:"10px 0"}},[n("Col",{staticStyle:{"text-align":"right"}},[n("Button",{attrs:{type:"success",shape:"circle",icon:"ios-add"},on:{click:function(t){e.addStore=!0}}},[e._v("اضافة محل / صفحة")])],1)],1),n("Table",{attrs:{border:"",columns:e.columns12,data:e.stores,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var l=t.row;return[n("strong",[e._v(e._s(l.name))])]}},{key:"action",fn:function(t){var l=t.row;t.index;return[n("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(l)}}},[e._v("حذف")])]}}])}),n("Modal",{attrs:{title:"اضافة محل/ صفحة",width:"600px"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.addStore,callback:function(t){e.addStore=t},expression:"addStore"}},[n("Row",{staticStyle:{direction:"rtl"}},[n("Col",{attrs:{span:"24"}},[n("div",[n("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:"اسم المحل / الصفحة..."},model:{value:e.addNewStore.storeName,callback:function(t){e.$set(e.addNewStore,"storeName",t)},expression:"addNewStore.storeName"}})],1),n("div",[n("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.addNewStore.storePhone,callback:function(t){e.$set(e.addNewStore,"storePhone",t)},expression:"addNewStore.storePhone"}})],1),n("div",[n("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:"العنوان..."},model:{value:e.addNewStore.storeAddress,callback:function(t){e.$set(e.addNewStore,"storeAddress",t)},expression:"addNewStore.storeAddress"}})],1),n("div",[n("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{type:"textarea",rows:4,placeholder:"الملاحظات..."},model:{value:e.addNewStore.storeNote,callback:function(t){e.$set(e.addNewStore,"storeNote",t)},expression:"addNewStore.storeNote"}})],1)])],1)],1)],1)},y=[],b={data:function(){return{columns12:[{title:"اسم المحل / الصفحة",key:"storeName"},{title:"رقم الهاتف",key:"storePhone"},{title:"العنوان",key:"storeAddress"},{title:"الملاحظات",key:"storeNote"},{title:"Action",slot:"action",width:150,align:"center"}],stores:[],loading:!0,addStore:!1,addNewStore:{storeName:"",storePhone:"",storeAddress:"",storeNote:""},url:this.$store.state.url}},created:function(){this.getStores()},methods:{getStores:function(){var e=this;e.loading=!0,this.$http.get("".concat(e.url,"/allStores")).then((function(t){console.log(t.data),e.stores=t.data,e.loading=!1})).catch((function(e){console.log(e)}))},remove:function(e){var t=this,n=this;console.log(e),this.$http.delete("http://localhost:5000/deleteStore/".concat(e.idStore)).then((function(e){n.$Message["success"]({background:!0,content:"تم حذف المحل او الصفحة"}),t.getStores()})).catch((function(e){n.$Message["error"]({background:!0,content:"حدث خطأ لم يتم حذف المحل او الصفحة"})}))},ok:function(){var e=this,t=this;this.addNewStore.storeName&&this.addNewStore.storePhone&&this.addNewStore.storeAddress&&this.addNewStore.storeNote?this.$http.post("http://localhost:5000/addStore",this.addNewStore).then((function(n){t.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.getStores()})).catch((function(e){t.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})})):t.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})},cancel:function(){this.$Message["info"]({background:!0,content:"تم الغاء الطلب"})}}},I=b,k=Object(s["a"])(I,S,y,!1,null,"20cfd8c9",null),w=k.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.keyComponent},[n("Row",{staticStyle:{margin:"20px",direction:"rtl"}},[n("Col",{attrs:{span:"6"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByProvinceId},model:{value:e.selectedFindProvince,callback:function(t){e.selectedFindProvince=t},expression:"selectedFindProvince"}},e._l(e.allProvince,(function(t,l){return n("Option",{key:l,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),n("Col",{attrs:{span:"6"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"السائق",filterable:"",clearable:""},model:{value:e.selectedFindDriver,callback:function(t){e.selectedFindDriver=t},expression:"selectedFindDriver"}},e._l(e.allDrivers,(function(t,l){return n("Option",{key:l,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),n("Col",{attrs:{span:"6"}},[n("Button",{attrs:{type:"primary",shape:"circle",icon:"md-done-all"},on:{click:e.setDriverForBills}},[e._v(" حفظ ")])],1),n("Col",{attrs:{span:"6"}},[n("Button",{staticStyle:{background:"#123456",color:"#fff"},attrs:{shape:"circle",icon:"ios-print"},on:{click:e.printInvoice}},[e._v(" طباعة الفاتورة ")])],1)],1),n("div",{attrs:{id:"table-data"}},[n("Table",{ref:"selection",staticStyle:{direction:"rtl"},attrs:{border:"",columns:e.columns4,data:e.allBills},on:{"on-select":e.selectedRow,"on-select-cancel":e.deSelectRow}})],1)],1)},D=[],B={data:function(){return{columns4:[{type:"selection",width:60,align:"center"},{title:"اسم الزبون",key:"customerName"},{title:"عنوان الزبون",key:"address"},{title:"هاتف الزبون",key:"customerPhone"},{title:"المحل او البيج",key:"storeName"},{title:"المحافظة",key:"provinceName"},{title:"المبلغ",key:"totalPrice"}],allBills:[],allDrivers:[],allStores:[],originalBills:[],originalDrivers:[],originalStores:[],allProvince:[],originalProvince:[],selectedBills:[],driverData:{},selectedFindDriver:"",selectedFindBill:"",selectedFindStore:"",selectedFindProvince:"",customerName:"",totalPrice:"",customerPhone:"",address:"",invoiceDate:"",note:"",selectedStore:0,addInvoice:!1,value:"",selectedDriver:0,selectedAddDriver:0,selectedAddStore:0,keyComponent:0,url:this.$store.state.url}},created:function(){var e=this;e.getAllData(),console.log(this.url)},methods:{getAllData:function(){var e=this,t="".concat(e.url,"/drivers"),n="".concat(e.url,"/driverBills"),l="".concat(e.url,"/allProvince"),o="".concat(e.url,"/allStores");function i(){return e.$http.get(t)}function a(){return e.$http.get(n)}function r(){return e.$http.get(o)}function s(){return e.$http.get(l)}Promise.allSettled([i(),a(),r(),s()]).then((function(t){var n=t[0],l=t[1],o=t[2],i=t[3];console.log(n),e.allDrivers="fulfilled"==n.status?n.value.data:[],e.originalDrivers="fulfilled"==n.status?n.value.data:[],e.allBills="fulfilled"==l.status?l.value.data:[],e.originalBills="fulfilled"==l.status?l.value.data:[],e.allStores="fulfilled"==o.status?o.value.data:[],e.originalStores="fulfilled"==o.status?o.value.data:[],e.allProvince="fulfilled"==i.status?i.value.data:[],e.originalProvince="fulfilled"==i.status?i.value.data:[],console.log(e.allDrivers),console.log(e.allStores),console.log(e.allBills)})).catch((function(e){console.log(e)}))},selectedRow:function(e){var t=this;t.selectedBills=e},deSelectRow:function(e){console.log(e)},setDriverForBills:function(){var e=this;e.selectedBills.length>0&&e.selectedFindDriver?(e.driverData={driverId:e.selectedFindDriver,driverBill:e.selectedBills},e.$Message.success("تم تعيين السائق")):e.$Message.error(" الرجاء اختيار سائق وتحديد الفواتير")},printInvoice:function(){var e=this;e.driverData.hasOwnProperty("driverId")?(this.$http.put("".concat(e.url,"/setDriverBill"),e.driverData).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"})})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})})),this.$store.state.printData=e.driverData,this.$router.push("/print-invoice")):e.$Message.error(" الرجاء اختيار سائق وتحديد الفواتير")},findInvoiceByNo:function(){var e,t=this;e=t.allBills.find((function(e){return e.billNo==t.selectedFindBill})),t.allBills=e?[e]:t.originalBills},findInvoiceByStoreName:function(){var e=this,t=e.allBills.filter((function(t){return t.storeId==e.selectedFindStore}));e.allBills=t||e.originalBills},findInvoiceByDriverId:function(){var e=this,t=e.allBills.filter((function(t){return t.driverId==e.selectedFindDriver}));e.allBills=t||e.originalBills},findInvoiceByProvinceId:function(){var e=this,t=e.allBills.filter((function(t){return t.provinceId==e.selectedFindProvince}));e.allBills=t||e.originalBills},findInvoiceByDate:function(){var e=this,t=new Date(e.invoiceDate).toISOString();console.log(t);var n=e.allBills.filter((function(e){return e.billDate==t}));e.allBills=n||e.originalBills},clearData:function(){var e=this;e.allBills=e.originalBills,e.keyComponent+=1}}},_=B,P=Object(s["a"])(_,x,D,!1,null,"1516bdea",null),$=P.exports,N=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.showPrint?l("div",[l("Row",{staticStyle:{margin:"20px"}},[l("Col",{staticStyle:{"padding-top":"20px"},attrs:{span:"8"}},[l("span",[e._v(" 07833032246 ")]),e._v(" "),l("br"),l("span",[e._v(" 07730089006 ")])]),l("Col",{attrs:{span:"8"}},[l("img",{staticStyle:{"margin-top":"10px"},attrs:{src:n("e26d"),width:"150px"}})]),l("Col",{staticStyle:{"padding-top":"30px"},attrs:{span:"8"}},[l("p",[e._v("اسم السائق : "+e._s(e.driver.driverName))]),l("p",[e._v("التاريخ : "+e._s(e.getDate()))])])],1),l("div",{staticStyle:{direction:"rtl",margin:"10px"}},[l("table",{staticStyle:{width:"100%",border:"1px solid rgb(218 218 218)"}},[e._m(0),e._l(e.invoice.driverBill,(function(t,n){return l("tr",{staticStyle:{background:"rgb(245 245 245)"}},[l("td",[e._v(e._s(n+1))]),l("td",[e._v(e._s(t.billNo))]),l("td",[e._v(e._s(t.address))]),l("td",[e._v(e._s(t.storeName))]),l("td",[e._v(e._s(t.customerPhone))]),l("td",[e._v(e._s(t.provinceName))]),l("td",[e._v(e._s(t.totalPrice))])])}))],2)]),l("Row",{staticStyle:{margin:"10px"}},[l("Col",{attrs:{span:"12"}},[e._v(" المجموع : "+e._s(e.reduceTotalPrice()))]),l("Col",{attrs:{span:"12"}},[e._v(" الملاحظات ")])],1),l("Row",{staticStyle:{margin:"10px"}},[l("Col",{attrs:{span:"24"}},[l("Button",{staticStyle:{background:"#123456",color:"#fff"},attrs:{id:"print-btn",shape:"circle",icon:"ios-print"},on:{click:e.print}},[e._v(" طباعة الفاتورة ")])],1)],1)],1):e._e()},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticStyle:{background:"rgb(218 218 218)"}},[n("th",[e._v("ت")]),n("th",[e._v("رقم الفاتورة")]),n("th",[e._v("العنوان")]),n("th",[e._v("اسم البيج")]),n("th",[e._v("رقم الزبون")]),n("th",[e._v("المحافظة")]),n("th",[e._v("المبلغ")])])}],C=(n("a15b"),n("d81d"),n("13d5"),n("ac1f"),n("1276"),{data:function(){return{invoice:{},showPrint:!1,driver:"",url:this.$store.state.url}},created:function(){var e=this;this.invoice=this.$store.state.printData,this.$http.get("".concat(this.url,"/driver/").concat(this.invoice.driverId)).then((function(t){console.log(t.data),e.driver=t.data[0],e.showPrint=!0})).catch((function(e){console.log(e)}))},methods:{print:function(){window.print()},getDate:function(){var e=new Date;return e.getDate()+" / "+(e.getMonth()+1)+" / "+e.getFullYear()},reduceTotalPrice:function(){var e=this.invoice.driverBill.map((function(e){return 1*e.totalPrice.split(",").join("")}));return console.log(e),e.reduce((function(e,t){return e+t}))}}}),M=C,A=(n("3d23"),Object(s["a"])(M,N,F,!1,null,null,null)),O=A.exports,R=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticStyle:{width:"300px",margin:"100px auto"}},[l("img",{staticStyle:{margin:"20px auto"},attrs:{src:n("e26d"),width:"200px"}}),l("Form",{ref:"formInline",staticStyle:{width:"290px"},attrs:{model:e.formInline,rules:e.ruleInline}},[l("div",[l("FormItem",{attrs:{prop:"user"}},[l("Input",{attrs:{type:"text",placeholder:"اسم المستخدم"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[l("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1)],1),l("div",[l("FormItem",{attrs:{prop:"password"}},[l("Input",{attrs:{type:"password",placeholder:"كلمة المرور"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[l("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),l("div",[l("FormItem",[l("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("تسجيل دخول")])],1)],1)])],1)},j=[],T={data:function(){return{formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:"الرجاء ادخال اسم المستخدم",trigger:"blur"}],password:[{required:!0,message:"الرجاء ادخال كلمة المرور",trigger:"blur"},{type:"string",message:"كلمة المرور غير صحيحة",trigger:"blur"}]},url:this.$store.state.url}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){console.log(e),e?t.$http.post("".concat(t.url,"/login"),t.formInline).then((function(e){console.log(e.data),t.$router.go(0),localStorage.setItem("loggedIn",JSON.stringify(e.data[0])),t.$Message.success("تم تسجيل الدخول بنجاح")})).catch((function(e){console.log(e),t.$Message.error("المعلومات المدخلة غير صحيحة")})):t.$Message.error("المعلومات المدخلة غير صحيحة")}))}}},E=T,z=(n("8c83"),Object(s["a"])(E,R,j,!1,null,null,null)),L=z.exports;l["default"].use(u["a"]);var J=[{path:"/",name:"Home",component:m},{path:"/stores",name:"Stores",component:w},{path:"/login",name:"Login",component:L},{path:"/print-invoice",name:"PrintInvoice",component:O},{path:"/invoice",name:"Invoice",component:$},{path:"/drivers",name:"drivers",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],q=new u["a"]({mode:"history",base:"/",routes:J}),H=q,Y=n("2f62");l["default"].use(Y["a"]);var G=new Y["a"].Store({state:{printData:{},url:"http://invoice.srit.me"},mutations:{},actions:{},modules:{}}),K=n("bc3a"),Q=n.n(K),U=n("f825"),V=n.n(U),W=(n("f8ce"),n("67a6")),X=n.n(W);l["default"].use(V.a,{locale:X.a}),l["default"].config.productionTip=!1,l["default"].http=l["default"].prototype.$http=Q.a,new l["default"]({router:H,store:G,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var l=n("9c0c"),o=n.n(l);o.a},"8c83":function(e,t,n){"use strict";var l=n("adbd"),o=n.n(l);o.a},"9c0c":function(e,t,n){},adbd:function(e,t,n){},e26d:function(e,t,n){e.exports=n.p+"img/sr.6e866804.png"},ecbc:function(e,t,n){}});
//# sourceMappingURL=app.dc0bf24c.js.map