(function(e){function t(t){for(var n,o,r=t[0],s=t[1],c=t[2],d=0,v=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&v.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),l()}function l(){for(var e,t=0;t<i.length;t++){for(var l=i[t],n=!0,o=1;o<l.length;o++){var s=l[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=l[0]))}return e}var n={},a={app:0},i=[];function o(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"5274ce9e"}[e]+".js"}function r(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.e=function(e){var t=[],l=a[e];if(0!==l)if(l)t.push(l[2]);else{var n=new Promise((function(t,n){l=a[e]=[t,n]}));t.push(l[2]=n);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=o(e);var c=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var l=a[e];if(0!==l){if(l){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,l[1](c)}a[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(l,n,function(t){return e[t]}.bind(null,n));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=c;i.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"3d23":function(e,t,l){"use strict";var n=l("ecbc"),a=l.n(n);a.a},"56d7":function(e,t,l){"use strict";l.r(t);l("e260"),l("e6cf"),l("cca6"),l("a79d");var n=l("2b0e"),a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("div",{staticStyle:{background:"#515a6e"},attrs:{id:"nav"}},[e.login?l("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[l("Row",[l("Col",{attrs:{span:"6"}},[l("div",{staticStyle:{display:"inline-block"}},[l("Button",{staticStyle:{color:"#515a6e"},attrs:{icon:"ios-exit"},on:{click:e.logout}},[e._v("تسجيل خروج")])],1)]),l("Col",{attrs:{span:"18"}},[l("div",{staticStyle:{"margin-right":"50px"}},[e.showBill?l("MenuItem",{attrs:{name:"1",to:"/"}},[l("Icon",{attrs:{type:"ios-paper"}}),e._v(" الفواتير ")],1):e._e(),e.showDriverBill?l("MenuItem",{attrs:{name:"4",to:"/invoice"}},[l("Icon",{attrs:{type:"ios-list-box"}}),e._v(" فواتير التسليم ")],1):e._e(),e.showDriverBill?l("MenuItem",{attrs:{name:"5",to:"/take"}},[l("Icon",{attrs:{type:"ios-list-box"}}),e._v(" فواتير الاستلام ")],1):e._e(),l("MenuItem",{attrs:{name:"2",to:"/stores"}},[l("Icon",{attrs:{type:"ios-cart"}}),e._v(" المحلات / الصفحات ")],1),l("MenuItem",{attrs:{name:"3",to:"/drivers"}},[l("Icon",{attrs:{type:"ios-people"}}),e._v(" السواق ")],1)],1)])],1)],1):e._e()],1),l("router-view")],1)},i=[],o={data:function(){return{login:!1,showDriverBill:!1,showBill:!1,user:""}},created:function(){var e=JSON.parse(localStorage.getItem("loggedIn"));e?(this.login=!0,this.user=e,1==e.roleId?(this.$router.push("/").catch((function(e){})),this.showDriverBill=!0,this.showBill=!0):2==e.roleId?(this.$router.push("/").catch((function(e){})),this.showDriverBill=!1,this.showBill=!0):(this.$router.push("/invoice").catch((function(e){})),this.showDriverBill=!0,this.showBill=!1)):this.$router.push("/login").catch((function(e){}))},methods:{logout:function(){localStorage.removeItem("loggedIn"),this.$router.go(0)}}},r=o,s=(l("5c0b"),l("2877")),c=Object(s["a"])(r,a,i,!1,null,null,null),d=c.exports,u=(l("d3b7"),l("8c4f")),v=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{key:e.keyComponent,staticClass:"home"},[l("Row",{staticStyle:{margin:"20px"}},[l("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"3"}},[l("Select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:"",placeholder:"رقم الفاتورة"},on:{"on-change":e.findInvoiceByNo},model:{value:e.selectedFindBill,callback:function(t){e.selectedFindBill=t},expression:"selectedFindBill"}},e._l(e.allBills,(function(t,n){return l("Option",{key:n,attrs:{value:t.billNo}},[e._v(e._s(t.billNo))])})),1)],1),l("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم المحل او الصفحة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByStoreName},model:{value:e.selectedFindStore,callback:function(t){e.selectedFindStore=t},expression:"selectedFindStore"}},e._l(e.allStores,(function(t,n){return l("Option",{key:n,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1),l("Col",{attrs:{span:"3"}},[l("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByProvinceId},model:{value:e.selectedFindProvince,callback:function(t){e.selectedFindProvince=t},expression:"selectedFindProvince"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),l("Col",{attrs:{span:"3"}},[l("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"الحالة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByStatusId},model:{value:e.selectedFindStatus,callback:function(t){e.selectedFindStatus=t},expression:"selectedFindStatus"}},e._l(e.statusData,(function(t,n){return l("Option",{key:n,attrs:{value:t.statusId}},[e._v(e._s(t.statusName))])})),1)],1),l("Col",{attrs:{span:"3"}},[l("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"اسم السائق",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDriverId},model:{value:e.selectedFindDriver,callback:function(t){e.selectedFindDriver=t},expression:"selectedFindDriver"}},e._l(e.allDrivers,(function(t,n){return l("Option",{key:n,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),l("Col",{attrs:{span:"4"}},[l("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"اختر يوم"},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDate},model:{value:e.invoiceDate,callback:function(t){e.invoiceDate=t},expression:"invoiceDate"}})],1),l("Col",{attrs:{span:"4"}},[l("Button",{attrs:{type:"success",shape:"circle",icon:"ios-add"},on:{click:function(t){e.addInvoice=!0}}},[e._v("اضافة فاتورة")])],1)],1),l("Table",{staticStyle:{direction:"rtl",margin:"10px"},attrs:{border:"",columns:e.columns12,data:e.allBills,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.row;return[l("strong",[e._v(e._s(n.name))])]}},{key:"action",fn:function(t){var n=t.row,a=t.index;return[l("Button",{attrs:{type:"info",shape:"circle",icon:"ios-information-circle",size:"small"},on:{click:function(t){return e.show(a)}}}),l("Button",{staticStyle:{background:"#515a6e",color:"#fff",margin:"0 5px"},attrs:{shape:"circle",icon:"ios-create",size:"small",disabled:1==n.pending},on:{click:function(t){return e.showEdit(n)}}}),l("Button",{attrs:{type:"success",shape:"circle",icon:"md-checkmark-circle-outline",size:"small"},on:{click:function(t){return e.changeStatus(n)}}})]}},{key:"status",fn:function(t){var n=t.row;t.index;return[l("div",{staticStyle:{display:"inline-block",margin:"1px",padding:"2px"}},[0==n.pending&&0==n.delivered?l("Icon",{attrs:{type:"ios-cube",color:"purple",size:"20"}}):e._e(),1==n.pending&&0==n.delivered&&0==n.returned?l("Icon",{attrs:{type:"ios-car",color:"Blue",size:"20"}}):e._e(),1==n.delivered&&1==n.pending?l("Icon",{attrs:{type:"ios-checkmark-circle",color:"green",size:"20"}}):e._e(),0==n.delivered&&1==n.pending&&1==n.returned?l("Icon",{attrs:{type:"ios-close-circle",color:"red",size:"20"}}):e._e()],1)]}},{key:"sequence",fn:function(t){t.row;var l=t.index;return[e._v(e._s(l+1))]}}])}),l("Modal",{attrs:{title:"اضافة فاتورة",width:"600px"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.addInvoice,callback:function(t){e.addInvoice=t},expression:"addInvoice"}},[l("Row",{staticStyle:{direction:"rtl",margin:"10px auto"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v(" تاريخ الفاتورة : "+e._s(e.getDate(new Date))+" ")])]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v("رقم الفاتورة : "+e._s(e.originalBills.length+1))])])],1),l("Row",{staticStyle:{direction:"rtl"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.customerPhone,callback:function(t){e.customerPhone=t},expression:"customerPhone"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},model:{value:e.selectedAddProvince,callback:function(t){e.selectedAddProvince=t},expression:"selectedAddProvince"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1)]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم الزبون..."},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"العنوان..."},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"السعر الكلي..."},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحل او الصفحة",filterable:"",clearable:""},model:{value:e.selectedAddStore,callback:function(t){e.selectedAddStore=t},expression:"selectedAddStore"}},e._l(e.allStores,(function(t,n){return l("Option",{key:n,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1)])],1)],1),l("Modal",{attrs:{title:"تعديل الفاتورة",width:"600px"},on:{"on-ok":e.okEdit,"on-cancel":e.cancel},model:{value:e.editInvoice,callback:function(t){e.editInvoice=t},expression:"editInvoice"}},[l("Row",{staticStyle:{direction:"rtl",margin:"10px auto"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v(" تاريخ الفاتورة : "+e._s(e.getDate(new Date(e.editInvoiceData.billDate)))+" ")])]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v("رقم الفاتورة : "+e._s(e.editInvoiceData.billNo))])])],1),l("Row",{staticStyle:{direction:"rtl"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.editInvoiceData.customerPhone,callback:function(t){e.$set(e.editInvoiceData,"customerPhone",t)},expression:"editInvoiceData.customerPhone"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},model:{value:e.editInvoiceData.provinceId,callback:function(t){e.$set(e.editInvoiceData,"provinceId",t)},expression:"editInvoiceData.provinceId"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1)]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم الزبون..."},model:{value:e.editInvoiceData.customerName,callback:function(t){e.$set(e.editInvoiceData,"customerName",t)},expression:"editInvoiceData.customerName"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"العنوان..."},model:{value:e.editInvoiceData.address,callback:function(t){e.$set(e.editInvoiceData,"address",t)},expression:"editInvoiceData.address"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"السعر الكلي..."},model:{value:e.editInvoiceData.totalPrice,callback:function(t){e.$set(e.editInvoiceData,"totalPrice",t)},expression:"editInvoiceData.totalPrice"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحل او الصفحة",filterable:"",clearable:""},model:{value:e.editInvoiceData.storeId,callback:function(t){e.$set(e.editInvoiceData,"storeId",t)},expression:"editInvoiceData.storeId"}},e._l(e.allStores,(function(t,n){return l("Option",{key:n,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1)])],1)],1),l("Modal",{attrs:{width:"360"},model:{value:e.deliveredStatus,callback:function(t){e.deliveredStatus=t},expression:"deliveredStatus"}},[l("p",{staticStyle:{color:"#123456","text-align":"center"},attrs:{slot:"header"},slot:"header"},[l("Icon",{attrs:{type:"ios-information-circle"}}),l("span",[e._v("حالة البضاعة")])],1),l("div",{staticStyle:{"text-align":"center"}},[l("p",[e._v(" هل انت متأكد من ان البضاعة قد سلمت للزبون او تم استرجاعها ؟ ")])]),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("Button",{attrs:{type:"error",loading:e.waitToChangeStatus},on:{click:e.confirmReturn}},[e._v("تم الاسترجاع")]),l("Divider",{attrs:{type:"vertical"}}),l("Button",{attrs:{type:"success",loading:e.waitToChangeStatus},on:{click:e.confirmStatus}},[e._v("تم التسليم")])],1)])],1)},p=[],f=(l("99af"),l("4de4"),l("7db0"),l("820e"),l("3ca3"),l("ddb0"),{name:"Home",data:function(){return{columns12:[{title:"ت",slot:"sequence",width:70,align:"center"},{title:"رقم الفاتورة",key:"billNo"},{title:"اسم الزبون",key:"customerName"},{title:"عنوان الزبون",key:"address"},{title:"هاتف الزبون",key:"customerPhone"},{title:"اسم الصفحة/المحل",key:"storeName"},{title:"هاتف الصفحة/المحل",key:"storePhone"},{title:"المحافظة",key:"provinceName"},{title:"السعر",key:"totalPrice"},{title:"الحالة",slot:"status",width:70,align:"center"},{title:"Action",slot:"action",width:120,align:"center"}],statusData:[{statusId:1,statusName:"في المخزن"},{statusId:2,statusName:"قيد التوصيل"},{statusId:3,statusName:"تم التسليم"},{statusId:4,statusName:"مسترجع"}],allBills:[],editInvoiceData:"",allDrivers:[],allStores:[],originalBills:[],originalDrivers:[],originalStores:[],allProvince:[],originalProvince:[],selectedAddProvince:"",deliveredStatus:!1,waitToChangeStatus:!1,editInvoice:!1,rowToChangeStatus:{},selectedFindDriver:"",selectedFindBill:"",selectedFindStatus:"",selectedFindProvince:"",selectedFindStore:"",customerName:"",totalPrice:"",customerPhone:"",address:"",invoiceDate:"",note:"",selectedStore:0,addInvoice:!1,loading:!0,value:"",selectedDriver:0,selectedAddDriver:0,selectedAddStore:0,keyComponent:0,url:this.$store.state.url}},created:function(){var e=this;e.getAllData()},methods:{getDate:function(e){var t=new Date(e);return t.getDate()+" / "+(t.getMonth()+1)+" / "+t.getFullYear()},changeStatus:function(e){var t=this;1==e.delivered&&1==e.pending?t.$Message.success("لقد تم تسليم هذه البضاعة"):0==e.pending?t.$Message.error("يجب اولا تعيين سائق للفاتورة"):1==e.returned?t.$Message.error("تم استرجاع البضاعة"):(this.deliveredStatus=!0,this.rowToChangeStatus=e)},confirmReturn:function(){var e=this;this.$http.put("".concat(e.url,"/updateReturn/").concat(e.rowToChangeStatus.idBill),{returned:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استرجاع"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},confirmStatus:function(){var e=this;this.$http.put("".concat(e.url,"/updateDelivered/").concat(e.rowToChangeStatus.idBill),{delivered:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استلام"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},show:function(e){var t=this;t.$Modal.info({title:"معلومات الفاتورة",content:"التاريخ：".concat(t.getDate(t.allBills[e].billDate),"<br>الملاحظات：").concat(t.allBills[e].note,"<br>هاتف المحل/الصفحة：").concat(t.allBills[e].storePhone)})},showEdit:function(e){var t=this;console.log(e),t.editInvoiceData=e,t.editInvoice=!0},getAllData:function(){var e=this,t="".concat(e.url,"/allProvince"),l="".concat(e.url,"/bills"),n="".concat(e.url,"/allStores"),a="".concat(e.url,"/drivers");function i(){return e.$http.get(t)}function o(){return e.$http.get(a)}function r(){return e.$http.get(l)}function s(){return e.$http.get(n)}Promise.allSettled([i(),r(),s(),o()]).then((function(t){var l=t[0],n=t[1],a=t[2],i=t[3];console.log(l),e.loading=!1,e.allProvince="fulfilled"==l.status?l.value.data:[],e.originalProvince="fulfilled"==l.status?l.value.data:[],e.allBills="fulfilled"==n.status?n.value.data:[],e.originalBills="fulfilled"==n.status?n.value.data:[],e.allStores="fulfilled"==a.status?a.value.data:[],e.originalStores="fulfilled"==a.status?a.value.data:[],e.allDrivers="fulfilled"==i.status?i.value.data:[],e.originalDrivers="fulfilled"==i.status?i.value.data:[],console.log(e.allDrivers),console.log(e.allStores),console.log(e.allBills)})).catch((function(e){console.log(e)}))},ok:function(){var e=this;if(e.selectedAddProvince&&e.selectedAddStore&&e.customerName&&e.customerPhone&&e.address&&e.totalPrice)if(11==e.customerPhone.length){var t={billNo:e.originalBills.length+1,driverId:0,provinceId:e.selectedAddProvince,storeId:e.selectedAddStore,billInfo:[{customerName:e.customerName,customerPhone:e.customerPhone,address:e.address,totalPrice:e.totalPrice,note:e.note}]};console.log(t),this.$http.post("".concat(e.url,"/addBill"),t).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.selectedAddProvince="",e.selectedAddStore="",e.customerName="",e.totalPrice="",e.customerPhone="",e.address="",e.invoiceDate="",e.note="",e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))}else e.$Message["error"]({background:!0,content:"رقم الهاتف غير صحيح يجب ان يحتوي على ١١ رقما"});else e.$Message["error"]({background:!0,content:"الرجاء ادخال جميع الحقول"})},okEdit:function(){var e=this,t=e.editInvoiceData;console.log(t),this.$http.post("".concat(e.url,"/editBill/").concat(e.editInvoiceData.idBill),t).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))},cancel:function(){this.$Message.info("Clicked cancel")},findInvoiceByProvinceId:function(){var e=this,t=e.allBills.filter((function(t){return t.provinceId==e.selectedFindProvince}));e.allBills=t||e.originalBills},findInvoiceByNo:function(){var e,t=this;e=t.allBills.find((function(e){return e.billNo==t.selectedFindBill})),t.allBills=e?[e]:t.originalBills},findInvoiceByStoreName:function(){var e=this,t=e.allBills.filter((function(t){return t.storeId==e.selectedFindStore}));e.allBills=t||e.originalBills},findInvoiceByStatusId:function(){var e=this,t=[];1==e.selectedFindStatus?t=e.allBills.filter((function(e){return 0==e.pending})):2==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&0==e.returned})):3==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&1==e.delivered&&0==e.returned})):4==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&1==e.returned})):e.allBills=e.originalBills,e.allBills=t||e.originalBills},findInvoiceByDriverId:function(){var e=this,t=e.allBills.filter((function(t){return t.driverId==e.selectedFindDriver}));e.allBills=t||e.originalBills},findInvoiceByDate:function(){var e=this,t=new Date(e.invoiceDate).toLocaleDateString();console.log(t);var l=e.allBills.filter((function(e){return new Date(e.billDate).toLocaleDateString()==t}));console.log(l),l?e.allBills=l:(e.invoiceDate="",e.allBills=e.originalBills)},clearData:function(){var e=this;e.invoiceDate="",e.allBills=e.originalBills,e.keyComponent+=1}}}),h=f,g=Object(s["a"])(h,v,p,!1,null,null,null),m=g.exports,S=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticStyle:{margin:"10px",direction:"rtl"}},[l("Row",{staticStyle:{margin:"10px 0"}},[l("Col",{staticStyle:{"text-align":"right"}},[l("Button",{attrs:{type:"success",shape:"circle",icon:"ios-add"},on:{click:function(t){e.addStore=!0}}},[e._v("اضافة محل / صفحة")])],1)],1),l("Table",{attrs:{border:"",columns:e.columns12,data:e.stores,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.row;return[l("strong",[e._v(e._s(n.name))])]}},{key:"action",fn:function(t){var n=t.row;t.index;return[l("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(n)}}},[e._v("حذف")])]}}])}),l("Modal",{attrs:{title:"اضافة محل/ صفحة",width:"600px"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.addStore,callback:function(t){e.addStore=t},expression:"addStore"}},[l("Row",{staticStyle:{direction:"rtl"}},[l("Col",{attrs:{span:"24"}},[l("div",[l("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:"اسم المحل / الصفحة..."},model:{value:e.addNewStore.storeName,callback:function(t){e.$set(e.addNewStore,"storeName",t)},expression:"addNewStore.storeName"}})],1),l("div",[l("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.addNewStore.storePhone,callback:function(t){e.$set(e.addNewStore,"storePhone",t)},expression:"addNewStore.storePhone"}})],1),l("div",[l("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{placeholder:"العنوان..."},model:{value:e.addNewStore.storeAddress,callback:function(t){e.$set(e.addNewStore,"storeAddress",t)},expression:"addNewStore.storeAddress"}})],1),l("div",[l("Input",{staticStyle:{width:"200px",margin:"5px auto"},attrs:{type:"textarea",rows:4,placeholder:"الملاحظات..."},model:{value:e.addNewStore.storeNote,callback:function(t){e.$set(e.addNewStore,"storeNote",t)},expression:"addNewStore.storeNote"}})],1)])],1)],1)],1)},y=[],b={data:function(){return{columns12:[{title:"اسم المحل / الصفحة",key:"storeName"},{title:"رقم الهاتف",key:"storePhone"},{title:"العنوان",key:"storeAddress"},{title:"الملاحظات",key:"storeNote"},{title:"Action",slot:"action",width:150,align:"center"}],stores:[],loading:!0,addStore:!1,addNewStore:{storeName:"",storePhone:"",storeAddress:"",storeNote:""},url:this.$store.state.url}},created:function(){this.getStores()},methods:{getStores:function(){var e=this;e.loading=!0,this.$http.get("".concat(e.url,"/allStores")).then((function(t){console.log(t.data),e.stores=t.data,e.loading=!1})).catch((function(e){console.log(e)}))},remove:function(e){var t=this,l=this;console.log(e),this.$http.delete("".concat(l.url,"/deleteStore/").concat(e.idStore)).then((function(e){l.$Message["success"]({background:!0,content:"تم حذف المحل او الصفحة"}),t.getStores()})).catch((function(e){l.$Message["error"]({background:!0,content:"حدث خطأ لم يتم حذف المحل او الصفحة"})}))},ok:function(){var e=this,t=this;this.addNewStore.storeName&&this.addNewStore.storePhone&&this.addNewStore.storeAddress&&this.addNewStore.storeNote?this.$http.post("".concat(t.url,"/addStore"),this.addNewStore).then((function(l){t.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),t.addNewStore={storeName:"",storePhone:"",storeAddress:"",storeNote:""},e.getStores()})).catch((function(e){t.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})})):t.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})},cancel:function(){this.$Message["info"]({background:!0,content:"تم الغاء الطلب"})}}},k=b,B=Object(s["a"])(k,S,y,!1,null,"614ed314",null),D=B.exports,I=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{key:e.keyComponent},[l("Row",{staticStyle:{margin:"20px",direction:"rtl"}},[l("Col",{attrs:{span:"6"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByProvinceId},model:{value:e.selectedFindProvince,callback:function(t){e.selectedFindProvince=t},expression:"selectedFindProvince"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),l("Col",{attrs:{span:"6"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"السائق",filterable:"",clearable:""},model:{value:e.selectedFindDriver,callback:function(t){e.selectedFindDriver=t},expression:"selectedFindDriver"}},e._l(e.allDrivers,(function(t,n){return l("Option",{key:n,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),l("Col",{attrs:{span:"6"}},[l("Button",{attrs:{type:"primary",shape:"circle",icon:"md-done-all"},on:{click:e.setDriverForBills}},[e._v(" حفظ ")])],1),l("Col",{attrs:{span:"6"}},[l("Button",{staticStyle:{background:"#123456",color:"#fff"},attrs:{shape:"circle",icon:"ios-print"},on:{click:e.printInvoice}},[e._v(" طباعة الفاتورة ")])],1)],1),l("div",{attrs:{id:"table-data"}},[l("Table",{ref:"selection",staticStyle:{direction:"rtl"},attrs:{border:"",columns:e.columns4,data:e.allBills},on:{"on-select":e.selectedRow,"on-select-cancel":e.deSelectRow}})],1)],1)},w=[],x={data:function(){return{columns4:[{type:"selection",width:60,align:"center"},{title:"اسم الزبون",key:"customerName"},{title:"عنوان الزبون",key:"address"},{title:"هاتف الزبون",key:"customerPhone"},{title:"المحل او البيج",key:"storeName"},{title:"المحافظة",key:"provinceName"},{title:"المبلغ",key:"totalPrice"}],allBills:[],allDrivers:[],allStores:[],originalBills:[],originalDrivers:[],originalStores:[],allProvince:[],originalProvince:[],selectedBills:[],driverData:{},selectedFindDriver:"",selectedFindBill:"",selectedFindStore:"",selectedFindProvince:"",customerName:"",totalPrice:"",customerPhone:"",address:"",invoiceDate:"",note:"",selectedStore:0,addInvoice:!1,value:"",selectedDriver:0,selectedAddDriver:0,selectedAddStore:0,keyComponent:0,url:this.$store.state.url}},created:function(){var e=this;e.getAllData(),console.log(this.url)},methods:{getAllData:function(){var e=this,t="".concat(e.url,"/drivers"),l="".concat(e.url,"/driverBills"),n="".concat(e.url,"/allProvince"),a="".concat(e.url,"/allStores");function i(){return e.$http.get(t)}function o(){return e.$http.get(l)}function r(){return e.$http.get(a)}function s(){return e.$http.get(n)}Promise.allSettled([i(),o(),r(),s()]).then((function(t){var l=t[0],n=t[1],a=t[2],i=t[3];console.log(l),e.allDrivers="fulfilled"==l.status?l.value.data:[],e.originalDrivers="fulfilled"==l.status?l.value.data:[],e.allBills="fulfilled"==n.status?n.value.data:[],e.originalBills="fulfilled"==n.status?n.value.data:[],e.allStores="fulfilled"==a.status?a.value.data:[],e.originalStores="fulfilled"==a.status?a.value.data:[],e.allProvince="fulfilled"==i.status?i.value.data:[],e.originalProvince="fulfilled"==i.status?i.value.data:[],console.log(e.allDrivers),console.log(e.allStores),console.log(e.allBills)})).catch((function(e){console.log(e)}))},selectedRow:function(e){var t=this;t.selectedBills=e},deSelectRow:function(e){console.log(e)},setDriverForBills:function(){var e=this;e.selectedBills.length>0&&e.selectedFindDriver?(e.driverData={driverId:e.selectedFindDriver,driverBill:e.selectedBills},e.$Message.success("تم تعيين السائق")):e.$Message.error(" الرجاء اختيار سائق وتحديد الفواتير")},printInvoice:function(){var e=this;e.driverData.hasOwnProperty("driverId")?(this.$http.put("".concat(e.url,"/setDriverBill"),e.driverData).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"})})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})})),this.$store.state.printData=e.driverData,this.$router.push("/print-invoice")):e.$Message.error(" الرجاء اختيار سائق وتحديد الفواتير")},findInvoiceByNo:function(){var e,t=this;e=t.allBills.find((function(e){return e.billNo==t.selectedFindBill})),t.allBills=e?[e]:t.originalBills},findInvoiceByStoreName:function(){var e=this,t=e.allBills.filter((function(t){return t.storeId==e.selectedFindStore}));e.allBills=t||e.originalBills},findInvoiceByDriverId:function(){var e=this,t=e.allBills.filter((function(t){return t.driverId==e.selectedFindDriver}));e.allBills=t||e.originalBills},findInvoiceByProvinceId:function(){var e=this,t=e.allBills.filter((function(t){return t.provinceId==e.selectedFindProvince}));e.allBills=t||e.originalBills},findInvoiceByDate:function(){var e=this,t=new Date(e.invoiceDate).toISOString();console.log(t);var l=e.allBills.filter((function(e){return e.billDate==t}));e.allBills=l||e.originalBills},clearData:function(){var e=this;e.allBills=e.originalBills,e.keyComponent+=1}}},_=x,P=Object(s["a"])(_,I,w,!1,null,"1516bdea",null),N=P.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showPrint?n("div",[n("Row",{staticStyle:{margin:"20px"}},[n("Col",{staticStyle:{"padding-top":"20px"},attrs:{span:"8"}},[n("span",[e._v(" 07833032246 ")]),e._v(" "),n("br"),n("span",[e._v(" 07730089006 ")])]),n("Col",{attrs:{span:"8"}},[n("img",{staticStyle:{"margin-top":"10px"},attrs:{src:l("e26d"),width:"150px"}})]),n("Col",{staticStyle:{"padding-top":"30px"},attrs:{span:"8"}},[n("p",[e._v("اسم السائق : "+e._s(e.driver.driverName))]),n("p",[e._v("التاريخ : "+e._s(e.getDate()))])])],1),n("div",{staticStyle:{direction:"rtl",margin:"10px"}},[n("table",{staticStyle:{width:"100%",border:"1px solid rgb(218 218 218)"}},[e._m(0),e._l(e.invoice.driverBill,(function(t,l){return n("tr",{staticStyle:{background:"rgb(245 245 245)"}},[n("td",[e._v(e._s(l+1))]),n("td",[e._v(e._s(t.billNo))]),n("td",[e._v(e._s(t.address))]),n("td",[e._v(e._s(t.storeName))]),n("td",[e._v(e._s(t.customerPhone))]),n("td",[e._v(e._s(t.provinceName))]),n("td",[e._v(e._s(t.totalPrice))])])}))],2)]),n("Row",{staticStyle:{margin:"10px"}},[n("Col",{attrs:{span:"12"}},[e._v(" المجموع : "+e._s(e.reduceTotalPrice()))]),n("Col",{attrs:{span:"12"}},[e._v(" الملاحظات ")])],1),n("Row",{staticStyle:{margin:"10px"}},[n("Col",{attrs:{span:"24"}},[n("Button",{staticStyle:{background:"#123456",color:"#fff"},attrs:{id:"print-btn",shape:"circle",icon:"ios-print"},on:{click:e.print}},[e._v(" طباعة الفاتورة ")])],1)],1)],1):e._e()},F=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("tr",{staticStyle:{background:"rgb(218 218 218)"}},[l("th",[e._v("ت")]),l("th",[e._v("رقم الفاتورة")]),l("th",[e._v("العنوان")]),l("th",[e._v("اسم البيج")]),l("th",[e._v("رقم الزبون")]),l("th",[e._v("المحافظة")]),l("th",[e._v("المبلغ")])])}],C=(l("a15b"),l("d81d"),l("13d5"),l("ac1f"),l("1276"),{data:function(){return{invoice:{},showPrint:!1,driver:"",url:this.$store.state.url}},created:function(){var e=this;this.invoice=this.$store.state.printData,this.$http.get("".concat(this.url,"/driver/").concat(this.invoice.driverId)).then((function(t){console.log(t.data),e.driver=t.data[0],e.showPrint=!0})).catch((function(e){console.log(e)}))},methods:{print:function(){window.print()},getDate:function(){var e=new Date;return e.getDate()+" / "+(e.getMonth()+1)+" / "+e.getFullYear()},reduceTotalPrice:function(){var e=this.invoice.driverBill.map((function(e){return 1*e.totalPrice.split(",").join("")}));return console.log(e),e.reduce((function(e,t){return e+t}))}}}),A=C,M=(l("3d23"),Object(s["a"])(A,$,F,!1,null,null,null)),O=M.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"300px",margin:"100px auto"}},[n("img",{staticStyle:{margin:"20px auto"},attrs:{src:l("e26d"),width:"200px"}}),n("Form",{ref:"formInline",staticStyle:{width:"290px"},attrs:{model:e.formInline,rules:e.ruleInline}},[n("div",[n("FormItem",{attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"اسم المستخدم"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1)],1),n("div",[n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"كلمة المرور"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),n("div",[n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("تسجيل دخول")])],1)],1)])],1)},T=[],R={data:function(){return{formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:"الرجاء ادخال اسم المستخدم",trigger:"blur"}],password:[{required:!0,message:"الرجاء ادخال كلمة المرور",trigger:"blur"},{type:"string",message:"كلمة المرور غير صحيحة",trigger:"blur"}]},url:this.$store.state.url}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){console.log(e),e?t.$http.post("".concat(t.url,"/login"),t.formInline).then((function(e){console.log(e.data),t.$router.go(0),localStorage.setItem("loggedIn",JSON.stringify(e.data[0])),t.$Message.success("تم تسجيل الدخول بنجاح")})).catch((function(e){console.log(e),t.$Message.error("المعلومات المدخلة غير صحيحة")})):t.$Message.error("المعلومات المدخلة غير صحيحة")}))}}},E=R,z=(l("8c83"),Object(s["a"])(E,j,T,!1,null,null,null)),q=z.exports,L=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.showPage?l("div",{key:e.keyComponent,staticClass:"home"},[l("Row",{staticClass:"filter-nav",staticStyle:{margin:"20px"}},[l("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[l("Select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:"",placeholder:"رقم الفاتورة"},on:{"on-change":e.findInvoiceByNo},model:{value:e.selectedFindBill,callback:function(t){e.selectedFindBill=t},expression:"selectedFindBill"}},e._l(e.allBills,(function(t,n){return l("Option",{key:n,attrs:{value:t.billNo}},[e._v(e._s(t.billNo))])})),1)],1),l("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم المحل او الصفحة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByStoreName},model:{value:e.selectedFindStore,callback:function(t){e.selectedFindStore=t},expression:"selectedFindStore"}},e._l(e.allStores,(function(t,n){return l("Option",{key:n,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1),l("Col",{attrs:{span:"4"}},[l("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByProvinceId},model:{value:e.selectedFindProvince,callback:function(t){e.selectedFindProvince=t},expression:"selectedFindProvince"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),l("Col",{attrs:{span:"4"}},[l("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"اسم السائق",filterable:"",clearable:""},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDriverId},model:{value:e.selectedFindDriver,callback:function(t){e.selectedFindDriver=t},expression:"selectedFindDriver"}},e._l(e.allDrivers,(function(t,n){return l("Option",{key:n,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),l("Col",{attrs:{span:"4"}},[l("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"اختر يوم"},on:{"on-clear":e.clearData,"on-change":e.findInvoiceByDate},model:{value:e.invoiceDate,callback:function(t){e.invoiceDate=t},expression:"invoiceDate"}})],1),l("Col",{attrs:{span:"4"}},[l("Button",{attrs:{type:"success",shape:"circle",icon:"ios-add"},on:{click:function(t){e.addInvoice=!0}}},[e._v("اضافة فاتورة استلام")])],1)],1),l("Table",{staticClass:"table-income",staticStyle:{direction:"rtl",margin:"10px"},attrs:{border:"",columns:e.columns12,data:e.allBills,size:"small",loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.row;return[l("strong",[e._v(e._s(n.name))])]}},{key:"action",fn:function(t){t.row;var n=t.index;return[l("Button",{attrs:{type:"info",shape:"circle",icon:"ios-information-circle",size:"small"},on:{click:function(t){return e.show(n)}}})]}},{key:"sequence",fn:function(t){t.row;var l=t.index;return[e._v(e._s(l+1))]}}],null,!1,2561378734)}),l("h3",[e._v("المجموع : "+e._s(e.getTotalPrice)+" دينار")]),l("Modal",{attrs:{title:"اضافة فاتورة استلام",width:"600px"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.addInvoice,callback:function(t){e.addInvoice=t},expression:"addInvoice"}},[l("Row",{staticStyle:{direction:"rtl",margin:"10px auto"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v(" تاريخ الفاتورة : "+e._s(e.getDate(new Date))+" ")])]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("span",[e._v("رقم الفاتورة : "+e._s(e.allAvailableBills.length+1))])])],1),l("Row",{staticStyle:{direction:"rtl"}},[l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:" رقم الهاتف..."},model:{value:e.customerPhone,callback:function(t){e.customerPhone=t},expression:"customerPhone"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحافظة",filterable:"",clearable:""},model:{value:e.selectedAddProvince,callback:function(t){e.selectedAddProvince=t},expression:"selectedAddProvince"}},e._l(e.allProvince,(function(t,n){return l("Option",{key:n,attrs:{value:t.idProvince}},[e._v(e._s(t.provinceName))])})),1)],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم السائق",filterable:"",clearable:""},model:{value:e.selectedAddDriver,callback:function(t){e.selectedAddDriver=t},expression:"selectedAddDriver"}},e._l(e.allDrivers,(function(t,n){return l("Option",{key:n,attrs:{value:t.idDriver}},[e._v(e._s(t.driverName))])})),1)],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"المحل او الصفحة",filterable:"",clearable:""},model:{value:e.selectedAddStore,callback:function(t){e.selectedAddStore=t},expression:"selectedAddStore"}},e._l(e.allStores,(function(t,n){return l("Option",{key:n,attrs:{value:t.idStore}},[e._v(e._s(t.storeName))])})),1)],1)]),l("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[l("div",[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"اسم الزبون..."},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"العنوان..."},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"السعر الكلي..."},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1),l("div",{staticStyle:{margin:"5px auto"}},[l("Input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"رقم الوصل"},model:{value:e.invoiceNumber,callback:function(t){e.invoiceNumber=t},expression:"invoiceNumber"}})],1)])],1)],1)],1):e._e()},J=[],H=l("ade3"),Y={name:"Home",data:function(){return{columns12:[{title:"ت",slot:"sequence",width:70,align:"center"},{title:"رقم الفاتورة",key:"billNo"},{title:"اسم الزبون",key:"customerName"},{title:"عنوان الزبون",key:"address"},{title:"هاتف الزبون",key:"customerPhone"},{title:"اسم الصفحة/المحل",key:"storeName"},{title:"المحافظة",key:"provinceName"},{title:"السعر",key:"totalPrice"},{title:"رقم الوصل",key:"invoiceNumber"},{title:"اسم السائق",key:"driverName"},{title:"Action",slot:"action",width:70,align:"center"}],statusData:[{statusId:1,statusName:"في المخزن"},{statusId:2,statusName:"قيد التوصيل"},{statusId:3,statusName:"تم التسليم"},{statusId:4,statusName:"مسترجع"}],allBills:[],editInvoiceData:"",showPage:!1,allDrivers:[],allStores:[],originalBills:[],invoiceNumber:0,originalDrivers:[],originalStores:[],allProvince:[],originalProvince:[],selectedAddProvince:"",deliveredStatus:!1,waitToChangeStatus:!1,editInvoice:!1,rowToChangeStatus:{},selectedFindDriver:"",selectedFindBill:"",selectedFindStatus:"",selectedFindProvince:"",selectedFindStore:"",customerName:"",totalPrice:"",customerPhone:"",address:"",invoiceDate:"",note:"",allAvailableBills:[],selectedStore:0,addInvoice:!1,loading:!0,value:"",selectedDriver:0,selectedAddDriver:0,selectedAddStore:0,keyComponent:0,url:this.$store.state.url}},created:function(){var e=this;e.getAllData()},methods:{getDate:function(e){var t=new Date(e);return t.getDate()+" / "+(t.getMonth()+1)+" / "+t.getFullYear()},confirmReturn:function(){var e=this;this.$http.put("".concat(e.url,"/updateReturn/").concat(e.rowToChangeStatus.idBill),{returned:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استرجاع"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},confirmStatus:function(){var e=this;this.$http.put("".concat(e.url,"/updateDelivered/").concat(e.rowToChangeStatus.idBill),{delivered:1}).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم تحديث الحالة الى استلام"}),e.deliveredStatus=!1,e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء تعديل الحالة تأكد من المعلومات"})}))},show:function(e){var t=this;t.$Modal.info({title:"معلومات الفاتورة",content:"التاريخ：".concat(t.getDate(t.allBills[e].takeDate),"<br>الملاحظات：").concat(t.allBills[e].note,"<br>هاتف المحل/الصفحة：").concat(t.allBills[e].storePhone)})},showEdit:function(e){var t=this;console.log(e),t.editInvoiceData=e,t.editInvoice=!0},getAllData:function(){var e=this,t="".concat(e.url,"/allProvince"),l="".concat(e.url,"/getTakeBills"),n="".concat(e.url,"/bills"),a="".concat(e.url,"/allStores"),i="".concat(e.url,"/drivers");function o(){return e.$http.get(t)}function r(){return e.$http.get(n)}function s(){return e.$http.get(i)}function c(){return e.$http.get(l)}function d(){return e.$http.get(a)}Promise.allSettled([o(),c(),d(),s(),r()]).then((function(t){var l=t[0],n=t[1],a=t[2],i=t[3],o=t[4];console.log(l),e.loading=!1,e.allProvince="fulfilled"==l.status?l.value.data:[],e.allAvailableBills="fulfilled"==o.status?o.value.data:[],e.originalProvince="fulfilled"==l.status?l.value.data:[],e.allBills="fulfilled"==n.status?n.value.data:[],e.originalBills="fulfilled"==n.status?n.value.data:[],e.allStores="fulfilled"==a.status?a.value.data:[],e.originalStores="fulfilled"==a.status?a.value.data:[],e.allDrivers="fulfilled"==i.status?i.value.data:[],e.originalDrivers="fulfilled"==i.status?i.value.data:[],e.showPage=!0,console.log(e.allDrivers),console.log(e.allStores),console.log(e.allBills)})).catch((function(e){console.log(e)}))},ok:function(){var e=this;if(e.selectedAddProvince&&e.selectedAddStore&&e.customerName&&e.customerPhone&&e.address&&e.totalPrice)if(11==e.customerPhone.length){var t,l=(t={customerName:e.customerName,customerPhone:e.customerPhone,address:e.address,totalPrice:e.totalPrice,note:e.note,invoiceNumber:e.invoiceNumber},Object(H["a"])(t,"customerName",e.customerName),Object(H["a"])(t,"customerPhone",e.customerPhone),Object(H["a"])(t,"address",e.address),Object(H["a"])(t,"totalPrice",e.totalPrice),Object(H["a"])(t,"note","nothing"),Object(H["a"])(t,"billNo",e.allAvailableBills.length+1),Object(H["a"])(t,"provinceId",e.selectedAddProvince),Object(H["a"])(t,"storeId",e.selectedAddStore),Object(H["a"])(t,"driverId",e.selectedAddDriver),Object(H["a"])(t,"sendDriver",0),t);console.log(l),this.$http.post("".concat(e.url,"/addTakeBill"),l).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.selectedAddProvince="",e.selectedAddStore="",e.customerName="",e.totalPrice="",e.customerPhone="",e.address="",e.invoiceDate="",e.note="",e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))}else e.$Message["error"]({background:!0,content:"رقم الهاتف غير صحيح يجب ان يحتوي على ١١ رقما"});else e.$Message["error"]({background:!0,content:"الرجاء ادخال جميع الحقول"})},okEdit:function(){var e=this,t=e.editInvoiceData;console.log(t),this.$http.post("".concat(e.url,"/editBill/").concat(e.editInvoiceData.idBill),t).then((function(t){console.log(t.data),e.$Message["success"]({background:!0,content:"تم حفظ البيانات"}),e.getAllData(),e.keyComponent+=1})).catch((function(t){console.log(t),e.$Message["error"]({background:!0,content:"حدث خطأ اثناء حفظ البيانات تأكد من المعلومات"})}))},cancel:function(){this.$Message.info("Clicked cancel")},findInvoiceByProvinceId:function(){var e=this,t=e.allBills.filter((function(t){return t.provinceId==e.selectedFindProvince}));e.allBills=t||e.originalBills},findInvoiceByNo:function(){var e,t=this;e=t.allBills.find((function(e){return e.billNo==t.selectedFindBill})),t.allBills=e?[e]:t.originalBills},findInvoiceByStoreName:function(){var e=this,t=e.allBills.filter((function(t){return t.storeId==e.selectedFindStore}));e.allBills=t||e.originalBills},findInvoiceByStatusId:function(){var e=this,t=[];1==e.selectedFindStatus?t=e.allBills.filter((function(e){return 0==e.pending})):2==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&0==e.returned})):3==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&1==e.delivered&&0==e.returned})):4==e.selectedFindStatus?t=e.allBills.filter((function(e){return 1==e.pending&&0==e.delivered&&1==e.returned})):e.allBills=e.originalBills,e.allBills=t||e.originalBills},findInvoiceByDriverId:function(){var e=this,t=e.allBills.filter((function(t){return t.driverId==e.selectedFindDriver}));e.allBills=t||e.originalBills},findInvoiceByDate:function(){var e=this,t=new Date(e.invoiceDate).toLocaleDateString();console.log(t);var l=e.allBills.filter((function(e){return new Date(e.takeDate).toLocaleDateString()==t}));console.log(l),l?e.allBills=l:(e.invoiceDate="",e.allBills=e.originalBills)},clearData:function(){var e=this;e.invoiceDate="",e.allBills=e.originalBills,e.keyComponent+=1}},computed:{getTotalPrice:function(){var e=this.allBills.reduce((function(e,t){return e+t.totalPrice}),0);return e}}},G=Y,K=(l("c2da"),Object(s["a"])(G,L,J,!1,null,null,null)),Q=K.exports;n["default"].use(u["a"]);var U=[{path:"/",name:"Home",component:m},{path:"/stores",name:"Stores",component:D},{path:"/take",name:"TakeBill",component:Q},{path:"/login",name:"Login",component:q},{path:"/print-invoice",name:"PrintInvoice",component:O},{path:"/invoice",name:"Invoice",component:N},{path:"/drivers",name:"drivers",component:function(){return l.e("about").then(l.bind(null,"f820"))}}],V=new u["a"]({mode:"history",base:"/",routes:U}),W=V,X=l("2f62");n["default"].use(X["a"]);var Z=new X["a"].Store({state:{printData:{},url:"http://invoice.srit.me"},mutations:{},actions:{},modules:{}}),ee=l("bc3a"),te=l.n(ee),le=l("f825"),ne=l.n(le),ae=(l("f8ce"),l("67a6")),ie=l.n(ae);n["default"].use(ne.a,{locale:ie.a}),n["default"].config.productionTip=!1,n["default"].http=n["default"].prototype.$http=te.a,new n["default"]({router:W,store:Z,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,l){"use strict";var n=l("9c0c"),a=l.n(n);a.a},"8c83":function(e,t,l){"use strict";var n=l("adbd"),a=l.n(n);a.a},"9c0c":function(e,t,l){},adbd:function(e,t,l){},c132:function(e,t,l){},c2da:function(e,t,l){"use strict";var n=l("c132"),a=l.n(n);a.a},e26d:function(e,t,l){e.exports=l.p+"img/sr.6e866804.png"},ecbc:function(e,t,l){}});
//# sourceMappingURL=app.6029b918.js.map